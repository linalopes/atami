<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glitch to Kanji Metamorphosis</title>
  <style>
    body {
      margin: 0;
      background-color: #9ec86d;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    svg {
      width: 500px;
      height: 500px;
    }
    .path {
      stroke: red;
      stroke-width: 0.5;
      fill: red;
    }
    .gameOfLife {
      animation: flicker 0.5s infinite alternate;
    }
    @keyframes flicker {
      0% { opacity: 0.2; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>

<svg id="glitchCanvas" viewBox="0 0 500 500"></svg>

<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>

<script>
  const svg = document.getElementById('glitchCanvas');
  const snapSvg = Snap(svg); // Initialize Snap.svg
  let points = [];

  // Function to create circles as paths
  function createPointAsPath(cx, cy, r) {
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    const d = `M ${cx - r}, ${cy} 
               a ${r},${r} 0 1,0 ${2 * r},0 
               a ${r},${r} 0 1,0 ${-2 * r},0`; // Full circle path
    path.setAttribute('d', d);
    path.setAttribute('class', 'path gameOfLife');
    svg.appendChild(path);
    points.push(path);
  }

  // Initialize with a single point
  function initializePoints() {
    createPointAsPath(Math.random() * 500, Math.random() * 500, Math.random() * 3 + 1);
  }

  // Double the number of points (Game of Life effect)
  function multiplyPoints() {
    points.forEach(point => {
      const cx = Math.random() * 500;
      const cy = Math.random() * 500;
      const r = Math.random() * 3 + 1;
      createPointAsPath(cx, cy, r);
    });
  }

  // Connect points with lines as paths
  function connectPoints() {
  points.forEach((p1, index1) => {
    points.forEach((p2, index2) => {
      if (index1 !== index2) {
        // Get the center coordinates of both points (paths)
        const cx1 = p1.getBBox().x + p1.getBBox().width / 2;
        const cy1 = p1.getBBox().y + p1.getBBox().height / 2;
        const cx2 = p2.getBBox().x + p2.getBBox().width / 2;
        const cy2 = p2.getBBox().y + p2.getBBox().height / 2;

        // Create the path for the line
        const linePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        const d = `M ${cx1},${cy1} L ${cx2},${cy2}`;
        linePath.setAttribute('d', d);
        linePath.setAttribute('class', 'path');
        
        // Set up for animation (stroke-dasharray and stroke-dashoffset)
        const pathLength = Math.sqrt((cx2 - cx1) ** 2 + (cy2 - cy1) ** 2);
        linePath.style.strokeDasharray = pathLength;
        linePath.style.strokeDashoffset = pathLength;

        svg.appendChild(linePath);

        // Animate the dashoffset to create the "walking" line effect
        setTimeout(() => {
          linePath.animate([{ strokeDashoffset: pathLength }, { strokeDashoffset: 0 }], {
            duration: 3000, // You can adjust the duration here
            fill: 'forwards',
            easing: 'linear',
          });
        }, index1 * 500); // Add some delay for a smoother animation
      }
    });
  });
}


  // Morph the connected points and lines into the initial shape
  function morphToInitialShape() {
    const allPaths = [...svg.querySelectorAll('path')]; // Grab all the current paths
    
    // Define the initial shape path
    const initialShape = snapSvg.path("M114.9,223.6c-2.3,0-2.4-.7-2.5-2.8-.2-2.5-.7-7.6-1.2-11.6-.4-3.9-.9-9.3-1-11.8,0-1.7-.9-3.1-1.8-3.1s-1.3.6-1.9,2.2c-1,2.7-3.4,7.6-5.3,12l-3.6,7.8c-1.2,2.7-2.2,5.1-2.5,6.1-.6,2.2-.9,2.5-1.5,2.5s-1.8-.9-2.4-2.7c-.6-2-3-7.2-4-9.9-1-2.7-2.8-6-4.1-8.8l-1.7-3.4c-.4-.9-.9-1.8-1.2-2.9-.4-1-1.2-2.8-1.9-3.6-.3-.4-.7-.6-1.1-.6s-.5.1-.7.4c-.4.5-.5,1.4-.5,2.8,0,5.3-.9,10.6-1.2,13,0,1.2-.4,3.6-.6,6,0,0,0,.1,0,.3-.2,2-.4,4-.4,5v.2c0,.4.1,1.1.1,1.7s0,.4,0,.6c0,.4-.4.8-2.1.8h-.6c-2.2-.2-2.7-.6-2.8-.7v-.6l.3-1c.4-2.1,1.9-10.7,2.5-15.9.4-4.4,1.7-15.9,1.7-18.6v-.9c0-.7.1-3.8.4-5.7.2-1.5.3-2.7,1-2.7,1.4,0,2,.4,2.4,1.2.3.4.4,1,.7,1.8.2.7.4,1.6.8,2.6.6,2.1,1.7,4.6,2.9,7l2.9,5.8c1.3,2.5,3.5,8.1,4.5,10.2.4,1.2,1,3,1.7,4.7.7,1.9,1.7,3.3,2.6,3.3,1.6,0,2.4-1.8,3-3.3.5-1.5.9-3.5,1.5-5,1.3-3,2.6-4.9,3.5-7.3,1-2.4,3.8-7.9,4.8-10.6.5-1.3,1.3-2.7,1.9-4,.6-1.2,1.2-2.5,1.3-3.4.2-1.7.9-2.7,1.7-2.7s1.8.6,1.9,4.2c.1,3.6.4,9.9.9,13.6.6,3.7,1.4,10.7,2,14.2.6,3.5,1.4,9.4,1.7,10.7,0,.4.2,1,.2,1.4v.4c-.1.4-.4.9-1.9.9h-.6Z M142.4,217.7c-1.4,2.7-3.4,8.6-4.5,10.7s-1,2.2-1.4,3.2c-.4,1-.7,2.1-1.2,3.2l-.5,1.4c-.1.4-.3.7-.5,1-.2.3-.6.6-1.4.6h-.5c-1.8-.2-2.9-.2-2.9-1.1s.1-.5.4-.9c.6-1.2,1.2-2.2,1.9-3.2.6-1.1,1.4-2.3,1.8-3.6.9-2.5,1.7-3.9,2.2-4.8.2-.5.4-1.2.4-2v-.3c0-1.2-.5-2.7-1.8-4.3-1-1.2-1.7-2.8-2.4-4.5l-1-2.6c-.4-.9-.8-1.7-1.2-2.4-.9-1.4-1.8-3.1-2.6-4.7-.9-1.6-1.7-3.2-2.3-3.9-.5-.5-1.5-1.8-1.5-2.8s.4-.9,1.5-.9h.5c2.4.2,3.1.4,4,2.7.9,2.7,2.6,6.5,3.6,9.1.5,1.3,1.1,2.4,1.7,3.5.5,1.1.9,1.9,1.2,2.7l.2,1.2c0,.4.2.8.2,1.1.3.6.7,1.2,1.4,1.2s.4,0,.6-.1c1.6-.4,2.6-2.9,3.2-4.8.6-1.7,2.3-6,3.1-7.6.8-1.7,2.9-6.4,3-7.7,0-.5.7-.6,1.4-.6s.6,0,.9,0h1.1c.4.1.9.2,1.2.4.2,0,.4.1.4.4s0,.4-.3.7c-1.4,2.4-4.4,8.2-5.5,10.4-1.1,2.2-3,6.8-4.3,9.5Z M177,198.2c-.1.5-.3.9-.5,1.3,0,.4-.2.6-.4.7,0,.2-.1.3-.4.3s-.4-.2-.5-.2c-.9-.4-1.5-.5-2.4-.5s-1.3,0-2.2.3c-2.4.6-5,2.7-5.3,6.6,0,1.2,0,2.6,0,4,0,2.7,0,5.3.4,6.8.1.9.4,2,.4,3s-.4,2.6-2.2,2.6-1.6,0-2.2.1c-.6,0-.9,0-1.1,0-.3-.1-.4-.4-.4-.8s0-.9,0-1.7c.5-4.2.6-7.4.6-10.5s0-8.5-.1-10.9l-.2-1.6c0-.4-.1-.7-.1-.9s0-.2,0-.3c0-.4.3-.9,2.1-.9s2.2.5,2.2,1.7v.5c0,.6,0,1.2.3,1.6.1.2.4.4.8.4s.2,0,.4,0c.4-.2.6-.6.9-1.1.9-1.8,3.6-3.5,5.5-3.5s3.7.6,4.2.8c.2.1.4.4.4.7s-.1.8-.4,1.5Z M183.2,185.2c.1-1.7,1.4-2.8,3.3-2.8h.5c1.8.2,3.5,2,3.6,4-.3,1.7-1.2,2.9-3.3,2.9s-4-1.8-4.1-4ZM187.1,223.6c-2.2,0-2.3-.4-2.3-3s.6-8.1.6-11.2-.1-9.1-.3-11.3c0-.4,0-.6,0-.8,0-1.3.4-1.7,2.3-1.7s1.9.1,1.9,2.4,0,.7,0,1.2c-.2,2.4-.3,4.5-.3,6.4s0,3,0,4.4c0,3.1.6,9.4.9,11v.5c0,1.2-.6,2.1-2.7,2.1Z M229.3,210.4c0,5.3-.8,6.5-3.9,9.9-3.1,3.3-6.6,3.9-11,4h-.4c-4.2,0-7.4-1.4-9.6-3.4-2.2-2-5-6.5-5-11.1s1.7-7.8,3.8-10c2.1-2.2,5-4.9,11.5-4.9h.4c4,.1,7.6,1.9,9.7,4.2,2.2,2.3,4.5,6,4.5,10.9v.4ZM222.6,203.3c-1.5-2.7-4.2-3.7-7.8-3.7s-4.5.3-7.3,2.4c-2.9,2.2-3.4,4.9-3.4,7.8s.6,4.8,2.7,7.1c2.1,2.4,3.7,3.2,7.2,3.6.4,0,.6,0,.9,0,2.2,0,4.2-.9,6-2.2.6-.4,1-.7,1.4-.9,1.8-1.4,2.8-5.1,2.8-7.8s-.4-2.4-.7-3.4c-.4-.9-1.1-1.7-1.8-3Z M266,209.2c0,4.2-1.2,8.3-3.9,10.4l-2,1.6c-.6.5-1.2.9-1.8,1.3-1.3.7-2.8,1.2-5.3,1.2-5.2,0-5.9-.8-6.6-1.7-.4-.5-.7-1.1-1.2-1.5-.4-.4-.9-.8-1.4-.8h-.3c-1.2.1-1.7.9-1.7,2.5s0,1,.1,1.7c.3,1.7.3,3.1.3,4.5v1.1c0,.6,0,1.2,0,1.7,0,.9.1,2.2.3,3.2,0,.9,0,1.5,0,2v.4c0,.4-.6,1-2.4,1.1-.2,0-.4,0-.6,0-1.4,0-2.4-.5-2.4-2s0-.2,0-.4c.3-2.7.4-12,.6-15.6,0-.8,0-2,0-3.7,0-5.5-.1-14.8-.4-16.3,0-.6-.2-1.3-.2-2,0-1.1.4-1.9,1.7-1.9h.3c1.7.1,2.2.2,2.2,1.2v.9c0,.9,0,1.5.3,1.8.1.2.4.4.8.4s.8-.3,1.4-.8c2.1-2.1,5.2-4.2,8.5-4.2,3.5.1,7.6,1.8,9.4,4,1.9,2.3,4.1,5.7,4.1,9.5v.6ZM262,209.8v-.9c0-1.8-.5-3.3-1.1-4.5-.4-.6-.8-1.2-1.2-1.7-.4-.5-.8-.9-1.1-1.2-1.4-1.6-3.8-2.7-6.8-2.7s-2.1,0-3,.4l-1.2.6c-.5.2-1,.6-1.7.9-2.7,1.7-4.3,4.7-4.3,8.4s1.4,7.1,3.7,8.9c2.2,1.8,4.5,2.1,6.9,2.1s.7,0,1.1,0,.4,0,.4,0c.5,0,.9,0,1.4,0,.9-.3,1.8-.7,3.2-1.8,2.3-1.7,3-2.8,3.3-5.5l.2-2.9Z M300.8,221.5c0,.4,0,.7-.1,1-.1.6-.6,1.1-1.8,1.1h-.4c-2.4-.2-3-.9-3-2.4s0-.8,0-1.2c.3-2.5.8-9.7.8-11.9v-.9c0-2.2,0-4.6-1.5-6.3-1.1-1.2-2.2-1.8-3.6-1.9-.4,0-.7,0-.9,0-1.2,0-3.9.6-5.3,1.7-1.3,1-3.1,2.5-3.3,6.1,0,1.6-.1,4.8-.1,7.7s0,5.7.1,6.6c0,.3,0,.6,0,.9,0,.9-.3,1.7-1.9,1.7h-.4c-2-.2-2.5-.5-2.5-1.7s0-.9.1-1.4c.2-3,.4-12.5.4-15.3s-.2-13-.5-17.4c-.2-4.3-.2-7.8-.2-9.6s.5-2,2.2-2h1.7c.4,0,.6.1.9.4.3.3.6.8.6,2.6v.4c-.1,4.2-.4,8.4-.7,10.9-.1,1.3-.2,2.3-.2,3.2s0,1.6.3,2.2c0,.6,0,1.4.5,1.8.2.2.4.4.9.4s1.2-.3,2.2-1.1c2-1.5,3.9-1.9,5.5-1.9s.9,0,1.2,0c1.9.1,5.5,1.4,6.7,3.2,1.2,1.9,2,5.2,2,7.8v.5c0,1.1,0,3,0,4.9,0,3,0,6.5.2,7.7,0,.6.1,1.1.1,1.7v.4Z M328.1,217.7c-1.4,2.7-3.4,8.6-4.5,10.7s-1,2.2-1.4,3.2c-.4,1-.7,2.1-1.2,3.2l-.5,1.4c-.1.4-.3.7-.5,1-.2.3-.6.6-1.4.6h-.5c-1.8-.2-2.9-.2-2.9-1.1s.1-.5.4-.9c.6-1.2,1.2-2.2,1.9-3.2.6-1.1,1.4-2.3,1.8-3.6.9-2.5,1.7-3.9,2.2-4.8.2-.5.4-1.2.4-2v-.3c0-1.2-.5-2.7-1.8-4.3-1-1.2-1.7-2.8-2.4-4.5l-1-2.6c-.4-.9-.8-1.7-1.2-2.4-.9-1.4-1.8-3.1-2.6-4.7-.9-1.6-1.7-3.2-2.3-3.9-.5-.5-1.5-1.8-1.5-2.8s.4-.9,1.5-.9h.5c2.4.2,3.1.4,4,2.7.9,2.7,2.6,6.5,3.6,9.1.5,1.3,1.1,2.4,1.7,3.5.5,1.1.9,1.9,1.2,2.7l.2,1.2c0,.4.2.8.2,1.1.3.6.7,1.2,1.4,1.2s.4,0,.6-.1c1.6-.4,2.6-2.9,3.2-4.8.6-1.7,2.3-6,3.1-7.6.8-1.7,2.9-6.4,3-7.7,0-.5.7-.6,1.4-.6s.6,0,.9,0h1.1c.4.1.9.2,1.2.4.2,0,.4.1.4.4s0,.4-.3.7c-1.4,2.4-4.4,8.2-5.5,10.4-1.1,2.2-3,6.8-4.3,9.5Z M349.2,224c-.4,0-1,0-1.3-.4-.4-.2-.9-.8-.9-2.3s0-.6,0-.9c.2-3.2.3-10.2.3-15.3s0-3.8,0-4.9v-9.5c0-3.7,0-7.2,0-8.1-.1-1.7-.3-4.9-.3-5.5s1.2-.6,2.2-.6h.4c1.4.2,2.7.4,2.7,3v.7c-.3,4-.6,12.8-.6,17.4v9.9c0,3.6,0,7.1.1,7.9.3,1.7.7,5.8.7,6.9s-.2,1.4-2.1,1.6c-.4,0-.8,0-1.2,0Z M366.9,224c-.4,0-1,0-1.3-.4-.4-.2-.9-.8-.9-2.3s0-.6,0-.9c.2-3.2.3-10.2.3-15.3s0-3.8,0-4.9v-9.5c0-3.7,0-7.2,0-8.1-.1-1.7-.3-4.9-.3-5.5s1.2-.6,2.2-.6h.4c1.4.2,2.7.4,2.7,3v.7c-.3,4-.6,12.8-.6,17.4v9.9c0,3.6,0,7.1.1,7.9.3,1.7.7,5.8.7,6.9s-.2,1.4-2.1,1.6c-.4,0-.8,0-1.2,0Z M405.3,213.6c0,2.2-.4,4.4-1.8,5.8-3,3-6.4,4.5-8.6,4.5s-6.1-.4-8.3-2.1c-2.3-1.7-3.9-4.6-3.9-7.5v-11.9c0-2.1-.4-3.6-.4-5.1s.4-1.2,2-1.2h.5c.4,0,.9,0,1.2,0h.5c0,.3.1.6.1,1.4v1.3c-.1,2.2-.2,3.6-.2,5.3s0,2.5,0,4.2c0,2.1.1,4,.3,5.5.2,1.6.6,3,1.5,4.1,1.4,1.9,2.7,2.3,4.5,2.3s.9,0,1.4,0h.2c2.2,0,3.7-.1,5.3-2.2,1.3-1.6,1.7-3.8,1.7-6.6s0-1.2,0-1.7c-.1-3.7-.4-9.3-.6-11,0-.4,0-.8,0-1.2,0-1.1.4-1.7,1.9-1.7h.4c2.1.1,2.6.6,2.6,2.1s0,.7,0,1.2c-.3,2.4-.5,6.7-.5,9.1s.4,3.4.4,5.6Z M450.8,224c-1.4,0-2-.5-2-2.2s0-.7,0-1.2c.4-3.8,1-7.1,1.2-11.2,0-1.3,0-2.4,0-3.2s0-1.1,0-1.6c-.1-1.2-.5-2.2-1.2-3.1-1.4-1.3-2.7-1.9-4-1.9h-.5c-1.3.1-4.5,1-5.4,2.7-.7,1.4-1.9,4.8-1.9,8.1s.7,10.3.9,11.4c0,.3,0,.6,0,.9s0,.4-.1.6c-.1.2-.5.6-1.9.6-2.4,0-3.2-.8-3.2-2.5s.1-1.1.2-1.6c.3-2.9.8-8.1.8-11.7s-.2-5.8-.9-6.9c-.6-1.2-2-1.9-3.7-2.2h-.4c-1.7,0-4.2,1.2-5.3,2.8-1.2,1.7-2.1,3.5-2.3,6.6v1.6c0,3.2.3,7.7.6,9.7,0,.6.1,1.2.1,1.7,0,1.2-.4,1.9-2.2,1.9s-2.7-.5-2.7-2.7,0-1,0-1.7c.3-3.7.4-8.6.4-11.4s-.4-8.7-.4-10.5,1.1-1.8,2.1-1.8,2.3,0,2.5.7c0,0,0,.1,0,.2v.4c.1.4.2.7.4.9.1.2.4.4.8.4s1.2-.3,2.2-1.1c1.4-1,2.1-1.4,2.7-1.7.4-.1.9-.1,1.3-.1h.9c1.9,0,3.5.6,4.6,2.2,1.2,1.5,2.1,1.9,3,1.9h.5c.3-.1,1.2-.6,1.9-1.3.5-.5,1.2-1,1.8-1.4,1.4-.9,2.5-1.3,4.3-1.3s4.2.7,5.6,2.5c1.2,1.7,1.8,3.2,1.8,6.5v3c0,4,.3,9.1.6,11l.3,1.8c.1.6.2,1.2.2,1.7,0,.9-.4,1.7-1.8,1.9-.7.1-1.3.1-1.8.1Z M123.1,273.8h-.4c-2-.1-2.7-.2-2.7-.9s0-.1,0-.2c0-.2,0-.4,0-.6,0-.9-.6-1.4-1.4-1.4s-1,.2-1.4.6c-.4.2-.7.6-1.1,1-.4.4-.9.8-1.4,1.2-1.2.8-3,1.4-5.5,1.4-5.3,0-8.5-2.2-10.4-4.5-1.8-2.2-3.5-6.8-3.5-9.6v-.6c.3-3,.9-6.6,2.4-8.9,2.2-3.1,6.8-5.7,10.9-5.7s5.7.9,6.5,1.9c.6.6,1.1,1.2,1.7,1.8.6.6,1.3.9,1.8.9s.2,0,.4,0c.9-.3,1.3-1.3,1.3-2.4s0-.5,0-.9.4-.6,1.3-.6h.7c1.2,0,2.2,0,2.2,1.9v.4c0,1,0,2.1,0,3.2,0,2.3,0,4.8,0,7.2v14.2c-.1.3-.4.6-1.4.6ZM120.2,256.8c-.2-.4-.6-.9-.7-1.4l-1.1-1.9c-.9-1.6-2.2-2.4-3.5-2.8-.4-.2-1.1-.3-1.5-.4,0,0,0,0-.4,0l-1.7-.4c-.4,0-.9,0-1.3,0-2.6,0-5.7,1.3-6.7,2.1-1.4,1-2.4,5.4-2.6,8v.6c0,2.5.6,4.8,1.6,6.5,1.2,1.9,3.9,3.3,7.1,3.5.6,0,1,0,1.4,0,2.2,0,3.7-.4,5.7-1.9,2.5-1.9,3.5-5.5,3.7-8.5,0-.5.1-1,.1-1.4,0-.7-.1-1.4-.4-1.9Z M159.6,287.9c-1,0-2.8-.2-2.8-2s.7-6.3.9-9.4c0-1.5.2-3,.2-4.2s-.5-2.4-1.2-2.4c-1.2,0-2.7.5-4,2.3-1,1.4-4.2,1.9-5.9,1.9s-4.9-.2-7.8-3c-3-2.7-5.3-6.5-5.3-10.5s0-8,3.5-11.1c3.6-3.2,5.5-4,8.1-4s5.2.7,6.8,1.4c.4.2.7.4,1,.7.7.5,1.4,1.2,2.4,1.2s.4,0,.6,0c.8-.4,1.5-.6,1.5-1.6v-.6c0-.1.3-.7,1.4-.7h.6c.5.1,1.4.2,1.8.6.2.3.4.7.4,1.7s0,.6,0,1.1c-.3,2.4-.3,6.2-.3,9.6v5.3c0,4.1,0,13.8,0,16.3.2,2.5.7,5.8.7,6.3s-.4,1.1-2,1.1h-.6ZM157.4,259.4c0-.4,0-.6,0-1,0-1.5-.4-2.6-.8-3.7-.6-1.1-1.3-1.9-2.1-2.8-1.6-1.7-4.2-2.6-7.5-2.6s-4,.8-6,2.2c-2,1.4-3.2,4-3.2,8.3s1.6,6.6,3,7.9c1.4,1.4,3.6,2.2,6.1,2.4h.3c1.2,0,2.2-.3,3.3-.7,1.2-.5,2.3-1.2,3.6-1.9,2.2-1.3,2.7-3.2,2.9-5.5l.2-2.6Z M197.9,263.8c0,2.2-.4,4.4-1.8,5.8-3,3-6.4,4.5-8.6,4.5s-6.1-.4-8.3-2.1c-2.3-1.7-3.9-4.6-3.9-7.5v-11.9c0-2.1-.4-3.6-.4-5.1s.4-1.2,2-1.2h.5c.4,0,.9,0,1.2,0h.5c0,.3.1.6.1,1.4v1.3c-.1,2.2-.2,3.6-.2,5.3s0,2.5,0,4.2c0,2.1.1,4,.3,5.5.2,1.6.6,3,1.5,4.1,1.4,1.9,2.7,2.3,4.5,2.3s.9,0,1.4,0h.2c2.2,0,3.7-.1,5.3-2.2,1.3-1.6,1.7-3.8,1.7-6.6s0-1.2,0-1.7c-.1-3.7-.4-9.3-.6-11,0-.4,0-.8,0-1.2,0-1.1.4-1.7,1.9-1.7h.4c2.1.1,2.6.6,2.6,2.1s0,.7,0,1.2c-.3,2.4-.5,6.7-.5,9.1s.4,3.4.4,5.6Z M233.8,273.8h-.4c-2-.1-2.7-.2-2.7-.9s0-.1,0-.2c0-.2,0-.4,0-.6,0-.9-.6-1.4-1.4-1.4s-1,.2-1.4.6c-.4.2-.7.6-1.1,1-.4.4-.9.8-1.4,1.2-1.2.8-3,1.4-5.5,1.4-5.3,0-8.5-2.2-10.4-4.5-1.8-2.2-3.5-6.8-3.5-9.6v-.6c.3-3,.9-6.6,2.4-8.9,2.2-3.1,6.8-5.7,10.9-5.7s5.7.9,6.5,1.9c.6.6,1.1,1.2,1.7,1.8.6.6,1.3.9,1.8.9s.2,0,.4,0c.9-.3,1.3-1.3,1.3-2.4s0-.5,0-.9.4-.6,1.3-.6h.7c1.2,0,2.2,0,2.2,1.9v.4c0,1,0,2.1,0,3.2,0,2.3,0,4.8,0,7.2v14.2c-.1.3-.4.6-1.4.6ZM230.8,256.8c-.2-.4-.6-.9-.7-1.4l-1.1-1.9c-.9-1.6-2.2-2.4-3.5-2.8-.4-.2-1.1-.3-1.5-.4,0,0,0,0-.4,0l-1.7-.4c-.4,0-.9,0-1.3,0-2.6,0-5.7,1.3-6.7,2.1-1.4,1-2.4,5.4-2.6,8v.6c0,2.5.6,4.8,1.6,6.5,1.2,1.9,3.9,3.3,7.1,3.5.6,0,1,0,1.4,0,2.2,0,3.7-.4,5.7-1.9,2.5-1.9,3.5-5.5,3.7-8.5,0-.5.1-1,.1-1.4,0-.7-.1-1.4-.4-1.9Z M257.3,250.1c-.9,0-1.7-.3-2.5-.3h-.2c-1.2,0-2.1.7-2.2,2.3,0,1.6-.2,4-.2,6.4s0,2.4.1,3.5c0,3,.4,8.2.6,10.2v.5c0,.9-.6,1.2-2.4,1.2h-1.9c-.2-.3-.4-.6-.4-2,0-2.8.4-9,.4-12.2s-.2-5.8-.2-6.9-1.5-2.4-2.7-2.4-.6,0-1,0-.7,0-1.1,0c-.6-.1-.9-.3-.9-.7s0-.1,0-.2c.2-2.2.8-2.8,1.8-2.8s1.2,0,1.7,0,.6,0,.9,0c.9-.2,1.5-.9,1.5-2.2v-.4c0-1.2-.1-2.4-.3-3.4,0-.7-.1-1.3-.1-1.7v-.3c.1-.4.8-1.3,1.9-1.3h.2c.4,0,1.2,0,1.5.3.2.1.4.5.4,1.6v.3c-.1,2.8-.1,4.5-.1,5.5s.4,1.2,1.1,1.4c.3,0,.6.1.9.1h1.2c.5.1.9.2,1.4.2s.9,0,1.2,0c.6.2.9.4.9,1,0,1.7-.5,2.2-1.4,2.2h-.3Z M265.8,235.4c.1-1.7,1.4-2.8,3.3-2.8h.5c1.8.2,3.5,2,3.6,4-.3,1.7-1.2,2.9-3.3,2.9s-4-1.8-4.1-4ZM269.7,273.8c-2.2,0-2.3-.4-2.3-3s.6-8.1.6-11.2-.1-9.1-.3-11.3c0-.4,0-.6,0-.8,0-1.3.4-1.7,2.3-1.7s1.9.1,1.9,2.4,0,.7,0,1.2c-.2,2.4-.3,4.5-.3,6.4s0,3,0,4.4c0,3.1.6,9.4.9,11v.5c0,1.2-.6,2.1-2.7,2.1Z M299.7,274.3c-1.1.2-2.2.4-3.5.4h-.6c-3.1-.2-6.5-1.1-9.6-4.2-3.2-3.2-4.1-6.9-4.2-9.9v-.4c0-3,1.3-8.4,3.6-10.6,2.6-2.3,6.1-4.5,10-4.5h.3c3.9.2,5.8.3,6.9,1,.3.3.6.4,1,.6.3.1.5.4.8.6.2.2.4.6.4,1.3s0,.4,0,.7c0,.7-.1,1.3-.2,1.8-.1.4-.1.7-.3.9,0,0-.1.1-.2.1s-.4-.2-.7-.4c-1.9-1.3-3.7-2.1-6.4-2.1h-.5c-2.9.1-4.2.4-6.8,2.4-2.5,2-3.4,4.8-3.4,7.6s.5,6,3.2,7.9c2.4,1.7,3.5,2.2,6.8,2.5h.9c3,0,5.1-1.1,6.4-2,.2-.1.4-.2.5-.2.4,0,.6.4.6,1.5v1.4c.2.4.2.7.2,1,0,.3-.2.6-1.6,1.2-1.3.4-2.4.9-3.7,1.2Z M336.8,263.8c0,2.2-.4,4.4-1.8,5.8-3,3-6.4,4.5-8.6,4.5s-6.1-.4-8.3-2.1c-2.3-1.7-3.9-4.6-3.9-7.5v-11.9c0-2.1-.4-3.6-.4-5.1s.4-1.2,2-1.2h.5c.4,0,.9,0,1.2,0h.5c0,.3.1.6.1,1.4v1.3c-.1,2.2-.2,3.6-.2,5.3s0,2.5,0,4.2c0,2.1.1,4,.3,5.5.2,1.6.6,3,1.5,4.1,1.4,1.9,2.7,2.3,4.5,2.3s.9,0,1.4,0h.2c2.2,0,3.7-.1,5.3-2.2,1.3-1.6,1.7-3.8,1.7-6.6s0-1.2,0-1.7c-.1-3.7-.4-9.3-.6-11,0-.4,0-.8,0-1.2,0-1.1.4-1.7,1.9-1.7h.4c2.1.1,2.6.6,2.6,2.1s0,.7,0,1.2c-.3,2.4-.5,6.7-.5,9.1s.4,3.4.4,5.6Z M382.3,274.2c-1.4,0-2-.5-2-2.2s0-.7,0-1.2c.4-3.8,1-7.1,1.2-11.2,0-1.3,0-2.4,0-3.2s0-1.1,0-1.6c-.1-1.2-.5-2.2-1.2-3.1-1.4-1.3-2.7-1.9-4-1.9h-.5c-1.3.1-4.5,1-5.4,2.7-.7,1.4-1.9,4.8-1.9,8.1s.7,10.3.9,11.4c0,.3,0,.6,0,.9s0,.4-.1.6c-.1.2-.5.6-1.9.6-2.4,0-3.2-.8-3.2-2.5s.1-1.1.2-1.6c.3-2.9.8-8.1.8-11.7s-.2-5.8-.9-6.9-2-1.9-3.7-2.2h-.4c-1.7,0-4.2,1.2-5.3,2.8-1.2,1.7-2.1,3.5-2.3,6.6v1.6c0,3.2.3,7.7.6,9.7,0,.6.1,1.2.1,1.7,0,1.2-.4,1.9-2.2,1.9s-2.7-.5-2.7-2.7,0-1,0-1.7c.3-3.7.4-8.6.4-11.4s-.4-8.7-.4-10.5,1.1-1.8,2.1-1.8,2.3,0,2.5.7c0,0,0,.1,0,.2v.4c.1.4.2.7.4.9.1.2.4.4.8.4s1.2-.3,2.2-1.1c1.4-1,2.1-1.4,2.7-1.7.4-.1.9-.1,1.3-.1h.9c1.9,0,3.5.6,4.6,2.2,1.2,1.5,2.1,1.9,3,1.9h.5c.3-.1,1.2-.6,1.9-1.3.5-.5,1.2-1,1.8-1.4,1.4-.9,2.5-1.3,4.3-1.3s4.2.7,5.6,2.5c1.2,1.7,1.8,3.2,1.8,6.5v3c0,4,.3,9.1.6,11l.3,1.8c.1.6.2,1.2.2,1.7,0,.9-.4,1.7-1.8,1.9-.7.1-1.3.1-1.8.1Z"); // Add the full initial shape path here
    initialShape.attr({ fill: 'none', stroke: 'red', strokeWidth: 2 });

    // Morph all the current paths into the initial shape
  allPaths.forEach((path, index) => {
    setTimeout(() => {
      Snap(path).animate({ d: initialShape.attr('d') }, 10000, mina.easeinout); // Morph smoothly into the initial shape
    }, index * 500); // Optional delay between morphs
  });

    // Define the Kanji path
    const kanjiPath = "M138.4,153.3c4.5-2.8,8.6-6.2,13.3-10.7,7-6.7,12.2-12.8,17.2-20.5-8.4,1.3-13.4,2.5-17.3,4.1-1.1.4-1.6.6-2.2.6-1.5,0-3.5-1.4-5.3-3.8-1.3-1.6-2-3.2-2-3.9s0-.5.3-.8c2.2,2.6,4.3,3.7,7.2,3.7s14.7-1.5,22.1-2.7c0-6.2-.4-9.3-1.1-10.5-.8-1.5-2.9-2.7-5.3-3.2.6-.7.8-.8,2.3-.8,2.2,0,5.7.8,7.8,2,1.5.8,2,1.3,2,2.5s0,.8-.4,1.5c-.9,2.1-1.3,4.6-1.4,7.9,5.8-.8,7.6-1.3,10.6-2.5.8-.3,1-.4,1.5-.4,2.1,0,6.2,2.6,6.2,3.9s-.6,1.3-2.4,1.3-1.2,0-2.5,0c-1.7,0-3-.1-3.9-.1-2.2,0-4.4.1-9.6.6,0,.9,0,1.8,0,2.2,0,6.1.4,14,1.1,22.6.3,3.4.4,6,.4,7.6,0,3.8-1.8,7.4-3.6,7.4s-1.5-.5-2-1.5c-.6-1.5-1.1-2.2-2.5-3.4q-1.7-1.3-9.8-5.8l.4-.9c6.4,2,9.7,2.9,12.8,3.6,0-1.4.1-4.8.1-8.7s0-3.9,0-6.6c-.1-4.6-.2-7.7-.2-9.3s0-1.7,0-3c-3,4.7-5.6,7.8-10.9,13-7.4,7.2-16,13.2-22.2,15.6l-.6-.9Z M197.7,85.9c6.4-4,12.3-8.8,19.1-15.2,10-9.5,17.4-18.3,24.6-29.4-12,1.9-19.2,3.5-24.8,5.8-1.6.6-2.3.8-3.2.8-2.2,0-5-2-7.6-5.4-1.8-2.3-2.9-4.5-2.9-5.6s.1-.7.4-1.2c3.2,3.7,6.2,5.3,10.3,5.3s21-2.1,31.6-3.9c-.1-8.8-.6-13.3-1.5-15-1.1-2.1-4.1-3.9-7.6-4.6.8-1,1.2-1.1,3.3-1.1,3.1,0,8.1,1.2,11.1,2.8,2.2,1.1,2.9,1.9,2.9,3.6s-.1,1.2-.6,2.2c-1.3,3-1.9,6.5-2,11.3,8.3-1.2,10.9-1.8,15.1-3.6,1.1-.4,1.4-.5,2.1-.5,3,0,8.8,3.7,8.8,5.6s-.9,1.8-3.4,1.8-1.7,0-3.5,0c-2.4-.1-4.3-.2-5.5-.2-3.2,0-6.3.2-13.7.9,0,1.3-.1,2.5-.1,3.1,0,8.7.6,20.1,1.6,32.4.4,4.9.6,8.6.6,10.8,0,5.4-2.6,10.6-5.2,10.6s-2.2-.7-2.8-2.1c-.8-2.1-1.6-3.2-3.6-4.8q-2.4-1.9-14-8.3l.5-1.3c9.1,2.8,13.8,4.1,18.3,5.2.1-2,.2-6.9.2-12.4s0-5.6-.1-9.4c-.2-6.5-.3-11-.3-13.3s0-2.4.1-4.3c-4.3,6.7-8,11.1-15.6,18.5-10.6,10.2-22.9,18.8-31.7,22.4l-.8-1.3Z M185.7,303.2c13.2-11.3,20.4-19.7,27.7-32.2,5.5-9.4,10-19.6,10-22.4s-.4-1.1-1.7-1.1-9.4,1.4-15.6,2.9c-6.3,1.4-11.7,3.1-15.4,4.7-1.3.6-2.3.8-3.1.8-1.7,0-4-1.7-6-4.5-1.4-1.9-2.2-3.8-2.2-5.2s0-.9.6-1.8c1.3,3.2,4.2,4.9,7.9,4.9s9.7-1,23.9-3.4c7.4-1.3,8-1.4,9.8-2.4q1-.6,1.7-.6c1.3,0,3.6,1.5,6.1,3.9,1.8,1.8,2.6,3,2.6,4s-.2,1.2-1.2,2.3c-1.1,1.2-1.4,1.7-2.9,4.6-6.8,13.7-15.4,25.6-24.3,34-5.3,4.9-10.3,8.5-17.3,12.5l-.8-1Z M172.8,420.9c8.4-5.3,15-12.4,18.6-19.7,3.5-7.3,4.9-15.6,5.4-31-7.3.5-15.6,1.5-21.5,2.9v3.3c0,.4,0,4.2.2,11,0,.3,0,1.6,0,3.7,0,1,0,1.8,0,2.4,0,3.5-.9,5.3-2.5,5.3s-4.9-4.8-4.9-7.7,0-1,.5-1.9c.5-1.1.8-2.6,1.1-4.6,0-1,.3-4.4.4-10.3-5.1,1-8.5,1.9-12.5,3.8-1.4.7-2.8,1.1-3.6,1.1-3,0-8.7-6.7-8.7-10.2s0-.5.3-.9c2.8,3.2,5.1,4.5,7.9,4.5s4-.4,6.8-.8q2.6-.4,6.4-1.1,1.9-.4,3.2-.6c0-4.4-.7-10.8-1.4-13-.6-1.7-1.6-3.3-3.2-4.4-.3-.2-1.2-.7-2.7-1.5.7-.7,1-.8,2.1-.8,2,0,5.5,1.3,8.2,3,2.3,1.4,3.4,2.8,3.4,4.4s0,1-.4,2.1c-.5,1.4-.9,5.4-.9,9.5q8.2-1.2,21.6-2.6c0-2.4,0-2.8,0-6.2,0-7.6-.4-10.6-1.6-12.3-1.3-1.6-3.4-2.8-6.6-3.6,1.4-.8,2.4-1.1,3.8-1.1,2.5,0,6.2.9,9.2,2.2,2.2,1,3.4,2.3,3.4,3.8s0,.8-.5,1.7c-1.1,2.6-1.6,7.6-1.8,14.8,7.4-.6,9.2-1,11.7-2,1.3-.6,1.7-.7,2.7-.7,3.2,0,8.7,3.7,8.7,5.7s-.9,1.7-2,1.7-1.1,0-1.7,0c-4-.5-8.4-.8-11.3-.8h-3.6q-3.1,0-4.5,0c-.6,18.2-2.3,26.8-6.7,34-4.5,7.4-13,14.4-22.2,18.3l-.9-1.4Z M138.3,437c3.2,2.7,5.3,3.5,8.1,3.5,4.3,0,10.9-1.1,16.7-2.8,4.2-1.3,5.8-1.8,7.8-3.2.5-.3,1-.4,1.5-.4,2.3,0,5.8,2.1,5.8,3.5s-1.5,1.7-5.2,2.5c-8.9,1.8-15,2.9-19.2,3.2,3.6,1.8,4.8,2.9,4.8,4.8s0,.5-.4,2.1c-.4,1.4-.7,3.7-.8,6.3,3.9-.6,16.1-2.4,17.3-2.6,2.2-.4,3.6-.7,4.9-1.3.6-.2,1.1-.4,1.5-.4,1.1,0,3.2.7,4.8,1.7,1.5.9,2.4,2,2.4,2.9s-.8,1.4-2.3,1.4h-.9c-1.3,0-4.6-.1-6.8-.1-6.6,0-11.1.4-21.2,1.6-.1,4.4-.2,6.3-.2,8.3,0,5.3.2,7.2,1,8.6.9,1.7,2.7,2.4,6,2.4,4.9,0,9.8-.7,12.9-1.9.2,0,.5-.1.8-.1.9,0,2.3.6,3.5,1.5,1.3.9,1.8,1.7,1.8,2.6s-.7,1.6-2.2,1.9c-2.4.4-6.9.7-10.2.7-9.4,0-13.6-1.3-15.6-4.9-1.4-2.4-1.9-5.1-2-10.2q0-1,0-5.9v-2.4c-5.6.8-11.1,2.1-13.6,3.2-.9.4-1.3.5-1.8.5-1,0-2.1-.5-3.4-1.6-1.9-1.7-3.7-4.6-3.7-6s.1-.9.4-1.4c1.9,2.8,3.8,4,6.7,4s5.7-.4,15.3-1.8c0-1.3,0-1.3,0-2.4,0-8.6-.2-9.8-1.8-11.2-.7,0-1.3,0-1.6,0-3.8,0-6.9-.9-9-2.6-1-.7-1.6-1.5-3.1-3.3l1-.8Z";

    // Morph the initial shape into the Kanji
    setTimeout(() => {
      initialShape.animate({ d: kanjiPath }, 10000, mina.easeinout); // Morph smoothly to the Kanji path
    }, 10000); // After 10 seconds morph to the Kanji path
  }

  // Start the animation sequence
  function startAnimation() {
    initializePoints(); // Start with one point

    // Doubling points every 10 seconds
    setTimeout(() => multiplyPoints(), 10000); // 1 -> 2
    setTimeout(() => multiplyPoints(), 20000); // 2 -> 4
    setTimeout(() => multiplyPoints(), 30000); // 4 -> 8
    setTimeout(() => multiplyPoints(), 40000); // 8 -> 16

    // After reaching 16 points, connect them with paths (lines as paths)
    setTimeout(() => connectPoints(), 50000);

    // Morph to the initial shape and then to Kanji
    setTimeout(() => morphToInitialShape(), 60000); // Start morph after 60 seconds
  }

  // Initiate the animation when the page loads
  startAnimation();

</script>

</body>
</html>
